<div class="h100">
  <div class="pull-top white bg-black hh50 w100 center no-stuffing flex vertical-align">
    <div class="w15 left pl20 clickable active" data-on-click="publish" data-publish="session:active" data-msg="{'secondary':'advanced_settings'}"><img src="img/icon_2x_button_back.png" alt="Back" class="hh50 pt15 pb15" /></div>
    <div class="w70">
      <h1 class="no-stuffing fs18 lh18 capitalize">Table Settings</h1>
    </div>
    <div class="w15">&nbsp;</div>
  </div>
  <div class="body-header h100 pb100 scroll hide-scrollbar"
      data-model="{{= model.sisbot_id }}"
      data-run="model.setup_edit"
      tg-name="table_settings_page">
    <p class="p0 m0 mt20 fs18 center">
      <i class="fas fa-exclamation-triangle red f-xxlarge"></i><br />
      These settings override the factory settings for your table. Changing the values will affect table performance.
    </p>
    <div  data-if="{{= model.csons }} == false">
      <div  data-run="model.check_for_csons"></div>
      <div class="mt20 black" data-template="spinner-bounce-tmp"></div>
    </div>
    <div  data-if="{{= model.csons }} !== false">
      <div class="p20 bb" data-if="{{= model.edit.cson }} !== false">
        <p class="no-stuffing w100 fs18 lh18 mb5">Configuration File</p>
        <select class="w100 corner-5px fs18 lh20 p10 pt7 pb7"
            data-field="model.edit.table_settings.cson"
            data-selected="{{= model.edit.cson }}"
            data-foreach="model.csons">
          <option  value="{{= scope.value.id }}">{{= scope.value.name }}</option>
        </select>
      </div>
      <div class="p20 bb">
        <p class="no-stuffing w100 fs18 lh18 mb5">Radius <span class="f-small">(in inches)</span></p>
        <input class="fs18 w100" type="text" placeholder="8.25" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" data-field="model.edit.table_settings.radius" value="{{= model.data.table_settings.radius }}" />
      </div>
      <div class="p20 bb">
        <p class="no-stuffing w100 fs18 lh18 mb5">Max Speed</p>
        <input class="fs18 w100" type="text" placeholder="1.75" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" data-field="model.edit.table_settings.max_speed" value="{{= model.data.table_settings.max_speed }}" />
      </div>
      <div class="p20 bb" data-if="{{= model.data.is_servo }} == false">
        <div class="w100 vertical clickable" data-on-click="toggle" data-field="model.edit.table_settings.useJimmyHoming">
          <span class="black f-large bg-white fas fa-check-square" data-if="{{= model.edit.table_settings.useJimmyHoming }} == true"></span>
          <span class="black f-large bg-white far fa-square" data-if="{{= model.edit.table_settings.useJimmyHoming }} !== true"></span>
          <p class="no-stuffing pl10 w100 fs18 lh18">Jimmy Homing</p>
        </div>
        <p>This setting centers the ball over the homing sensor. It should more reliably land in the same place, but will likely need the Homing Offset calibrated.</p>
        <div>
          <p class="no-stuffing w100 fs18 lh18 mb5">Homing Offset <span >{{= app.plugins.toFixed(model.edit.table_settings.homingOffset, 2) }}</span> <span class="f-small">(in inches)</span></p>
          <div class="flex vertical-align pl10 pr10 w100">
            <div class="w100 flex relative center">
              <div class="w5 blue-hover center pt10 pb10" data-on-click="model.homing_offset_down">
                <i class="fa fa-minus-circle center clickable active grey" aria-hidden="true"></i>
              </div>
              <div class="w90 mt3 p5 mb3">
                <input class="w100" type="range" min="-0.12" max="0.12" step="0.01" data-on-input="model.homing_offset" value="{{= model.edit.table_settings.homingOffset }}" />
              </div>
              <div class="w5 blue-hover center pt10 pb10" data-on-click="model.homing_offset_up">
                <i class="fa fa-plus-circle center clickable active grey" aria-hidden="true"></i>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="bb">
        <div class="p20 pb0">
          <p class="no-stuffing w100 fs18 lh18 mb5">Jog Theta Steps</p>
          <input class="fs18 w100" type="text" placeholder="100" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" data-field="model.edit.table_settings.jogStepsRadius" value="{{= model.data.table_settings.jogStepsRadius }}" />
        </div>
        <div class="p20">
          <p class="no-stuffing w100 fs18 lh18 mb5">Jog Rho Steps</p>
          <input class="fs18 w100" type="text" placeholder="100" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" data-field="model.edit.table_settings.jogStepsTheta" value="{{= model.data.table_settings.jogStepsTheta }}" />
        </div>
      </div>
      <div class="p20 bb" data-if="{{= model.data.led_enabled }} == true">
        <p class="no-stuffing w100 fs18 lh18 mb5">RGBW Count</p>
        <input class="fs18 w100" type="text" placeholder="99" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" data-field="model.edit.table_settings.rgbwCount" value="{{= model.data.table_settings.rgbwCount }}" />
      </div>
      <div data-if="{{= model.data.fault_status }} !== false">
        <div class="p20 bb" data-if="{{= model.data.is_servo }} == true">
          <p class="no-stuffing w100 fs18 lh18 mb5">Servo Motors</p>
          <div class="mt20 p15 btn bg-blue w100 m0 clickable active corner-5px uppercase fs18 strong"
              data-on-click="model._update_sisbot_msg"
              data-msg="{'endpoint':'servo_enable', 'data':{'motor':'rho'}}">
            Re-enable Rho
          </div>
          <div class="mt20 p15 btn bg-blue w100 m0 clickable active corner-5px uppercase fs18 strong"
              data-on-click="model._update_sisbot_msg"
              data-msg="{'endpoint':'servo_enable', 'data':{'motor':'theta'}}">
            Re-enable Theta
          </div>
        </div>
      </div>
      <div class="p20 bb">
        <div class="w100 vertical clickable h__k"
            data-on-click="toggle"
            data-field="model.edit.table_settings.useRGBW">
          <span class="h__k black f-large bg-white fas fa-check-square" data-if="{{= model.edit.table_settings.useRGBW }} == true"></span>
          <span class="h__k black f-large bg-white far fa-square" data-if="{{= model.edit.table_settings.useRGBW }} !== true"></span>
          <p class="no-stuffing pl10 w100 fs18 lh18">RGBW Lights</p>
        </div>
        <p class="i">*Remember to hit the save button <i class="fas fa-arrow-down"></i></p>
        <div class="h__k" data-if="{{= model.edit.table_settings.useRGBW }} == true">
          <p class="no-stuffing w100 fs18 lh18 mb5">RGBW Count</p>
          <input class="h__k fs18 w100" type="text" placeholder="100"
              autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"
              data-field="model.edit.table_settings.rgbwCount"
              value="{{= model.data.table_settings.rgbwCount }}" />
          <p class="pt20 no-stuffing w100 fs18 lh18 mb5">Python Requirement</p>
          <div class="mt5 p15 btn bg-blue w100 m0 clickable active corner-5px uppercase fs18 strong h__k"
              data-on-click="model.python_install"
              data-if="{{= model.data.is_internet_connected }} == true">
            Install Python
          </div>
          <div class="mt5 p15 btn bg-grey w100 m0 active corner-5px uppercase fs18 strong h__k"
              data-if="{{= model.data.is_internet_connected }} == false">
            Install Python
          </div>
          <div class="i fs14 lh24">*If you purchased your table after September 16th, 2019, you do not need this step.</div>
        </div>
      </div>
      <div class="p20 bb">
        <p class="no-stuffing w100 fs18 lh18 mb5">Regenerate Track Images</p>
        <div class="mt20 p15 btn bg-blue w100 m0 clickable active corner-5px uppercase fs18 strong"
            data-if="{{= model.data.thumbnail_queue_length }} <= 0"
            data-on-click="model.regenerate_thumbnails">
          Regenerate Thumbnails
        </div>
        <div class="mt20 p15 btn bg-grey w100 m0 corner-5px uppercase fs18 strong"
            data-if="{{= model.data.thumbnail_queue_length }} > 0">
          Regenerating ({{= model.data.thumbnail_queue_length }})
        </div>
      </div>
      <div class="p20">
        <div class="mt20 p15 btn bg-blue w100 m0 clickable active corner-5px uppercase fs18 strong"
            data-on-click="model.confirm_advanced_settings">
          Save
        </div>
      </div>
    </div>
    <div class="hh150">&nbsp;</div>
  </div>
</div>
