<div class="bg-white no-stuffing">
    <div class="row m0 mt10">
        <div class="col-sm-12 col-xs-12 p10 bg-grey-l white">
            <div class="pull-right">
                <i class="fa fa-compress w25p h__k"
                    data-if="{{= model.is_expanded }} == true"
                    data-field="model.is_expanded"
                    data-on-click="toggle"
                ></i>
                <i class="fa fa-expand w25p h__k"
                    data-if="{{= model.is_expanded }} == false"
                    data-field="model.is_expanded"
                    data-on-click="toggle"
                ></i>
                <i class="fa fa-trash w25p h__k"
                    data-on-click="parent.remove_section"
                    data-msg="{{= model.id }}"
                ></i>
            </div>
            <div class="h__k">Section: "{{= model.data.name }}" {{= model.data.question_ids['length'] }} Questions</div>
        </div>
    </div>

    <div class="row m0 p10 pb20">
        <div class="col-md-12">
            <input type="text" class="w100 s2 pt10 h__k" placeholder="Untitled Section" value="{{= model.data.name }}"
                data-field="model.data.name"
                data-on-keyup="model.save"
                data-on-key-enter="blur"
                data-on-blur="trigger"
                data-trigger="change:data.name"
            />
        </div>
        <br clear="both" />
    </div>

    <div class="h__k {{= (model.is_expanded == 'true') ? '' : 'hide' }}">
        <ul class="h__k no-stuffing"
            id="{{= _self_.cid }}"
            data-sortable=".question-reorder"
            data-field="model.data.question_ids"
            data-foreach="model.data.question_ids"
            data-foreach-map="true"
            data-foreach-add="foreach_on_add"
            data-foreach-remove="foreach_reset"
            data-item="question-tmp"
        ></ul>
        <br clear="both" />

        <div class="bg-m-grey white">
            <div class="col-md-6 p20">
                <select class="h__k pull-right w100"
                    data-chosen="true"
                    data-field="model.next_question"
                    value="{{= model.next_question }}"
                    data-subscribe-ctx="model"
                    data-subscribe="change:data.question_ids"
                    data-on-subscribe="foreach_reset"
                    data-cluster="{'type':'question'}"
                    data-cluster-comparator="{'key':'data.name','ord':'asc'}"
                    data-foreach="cluster"
                    data-foreach-add="foreach_reset"
                    data-foreach-remove="foreach_reset"
                    data-foreach-default="Add new question"
                    data-foreach-without="model.data.question_ids"
                ><option class="h__k" value="{{= model.id }}">{{= model.data.name }}</option></select>
            </div>
            <div class="h__k col-md-6 pt20 pb20 btn bg-green white"
                data-on-click="model.add_question"
            >Add Question</div>
            <br clear="both" />
        </div>
    </div>

    <div class="h__k" data-template="form-logic-tmp"></div>
    <div class="h__k" data-template="debug-tmp"></div>
</div>
