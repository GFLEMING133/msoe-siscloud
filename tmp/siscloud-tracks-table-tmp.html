<div class="flex bg-d-grey white">
    <div class="no-stuffing w5 p10"></div>
    <div class="no-stuffing w20 p10 clickable bg-l-grey-hover h__k"
        data-on-click="model.comparator_change"
        data-msg="data.name"
    ><span class="clickable">
            <span>Name</span>
            <span class="h__k" data-if="{{= model.comparator.key }} == data.name">
                <span class="h__k" data-if="{{= model.comparator.ord }} == asc"><i class="fa fa-caret-down" aria-hidden="true"></i></span>
                <span class="h__k" data-if="{{= model.comparator.ord }} == dsc"><i class="fa fa-caret-up" aria-hidden="true"></i></span>
            </span>
        </span>
    </div>
    <div class="no-stuffing w10 p10">Duration</div>
    <div class="no-stuffing w20 p10">User</div>
    <div class="no-stuffing w10 p10">Published?</div>
    <div class="no-stuffing w25 p10">Track File</div>
    <div class="no-stuffing w10 p10"></div>
</div>
<div class="bg-white m0 center i p20 h__k" data-if="{{= grandparent.loaded.tracks }} == false">
    Loading tracks...
</div>
<div class="bg-white m0 h__k"
    data-if="{{= grandparent.loaded.tracks }} == true"
    data-cluster="{'type':'track','is_deleted':'false','is_saved':'true'}"
    data-cluster-comparator="model.comparator"
    data-subscribe-ctx="model"
    data-subscribe="change:comparator"
    data-on-subscribe="cluster_comparator"
>
    <div class="h__k center i p20" data-if="{{= app.plugins.length(_cluster_) }} == 0">
        There are no tracks to show. Open the context menu to create one
    </div>
    <div class="h__k"
        data-if="{{= app.plugins.length(_cluster_) }} !== 0"
        data-foreach="cluster"
        data-foreach-render="foreach_reset"
        data-foreach-add="foreach_reset"
        data-foreach-change="foreach_reset"
        data-foreach-remove="foreach_reset"
        data-foreach-sort="foreach_reset"
    >
        <div class="flex bb bg-white bg-ll-grey-hover clickable">
            <div class="no-stuffing w5 p10">
                <img src="" class="w100 center h__k" alt="slow"
                    data-src="{{= app.config.get_thumb_url() }}thumbnail/400/{{= model.id }}.png" 
                />
            </div>
            <div class="no-stuffing w20 p10 h__k"
                data-on-click="publish"
                data-publish="session:active"
                data-msg="{'track_id':'{{= model.id }}'}"
            >{{= model.data.name }}</div>
            <div class="no-stuffing w10 p10 h__k"
                data-on-click="publish"
                data-publish="session:active"
                data-msg="{'track_id':'{{= model.id }}'}"
            >{{= model.data.duration }}</div>
            <div class="no-stuffing w20 p10 h__k"
                data-on-click="publish"
                data-publish="session:active"
                data-msg="{'track_id':'{{= model.id }}'}"
            >{{= model.data.created_by_name }}</div>
            <div class="no-stuffing w10 p10">
                <div class="h__k {{= (model.data.is_published == 'true') ? '' : 'hide' }}"
                    data-field="model.data.is_published"
                    data-on-click="toggle"
                >
                    <input class="cmn-toggle cmn-toggle-round h__k" type="checkbox" checked>
                    <label for="cmn-toggle-1"></label>
                </div>
                <div class="h__k {{= (model.data.is_published == 'false') ? '' : 'hide' }}"
                    data-field="model.data.is_published"
                    data-on-click="toggle"
                >
                    <input class="cmn-toggle cmn-toggle-round h__k" type="checkbox">
                    <label for="cmn-toggle-1" class="h__k"></label>
                </div>
            </div>
            <div class="no-stuffing w25 p10">
                <div class="h__k" data-if="{{= model.upload_status }} == uploading">
                    Uploading <i class="fa fa-spinner spin" aria-hidden="true"></i>
                </div>
                <div class="h__k" data-if="{{= model.upload_status }} == success">
                    <i class="fa fa-check" aria-hidden="true"></i> Upload Success
                </div>
                <div class="h__k" data-if="{{= model.upload_status }} == failure">
                    <i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Upload Failure
                </div>
                <div class="h__k" data-if="{{= model.upload_status }} == false"
                    data-template="upload-file-tmp"
                ></div>
                <div class="h__k" data-if="{{= model.upload_status }} == hidden"
                    data-field="model.upload_status"
                    data-on-click="set"
                    data-msg="{{= 'false' }}"
                >Upload new track file?</div>
            </div>
            <div class="no-stuffing w10 p10">
                <div class="h__k" data-on-click="model.erase" title="Delete">
                    <i class="fa fa-trash l-grey bblack-hover w25p pull-right"></i>
                </div>
            </div>
        </div>
    </div>
</div>
