<div class="h100" data-model="{{= session.community_id }}" data-run="model.reset_params">
  <div class="h100" data-model="{{= session.active.playlist_id }}">
    <div class="h100" data-scope="true"
        data-defaults="{'type':'searchable_list','list_type':'playlist_track','order':'dsc','q':{'value':'','search_keys':['data.name','data.created_by_name']},'terms':{'is_deleted':'false'}}">
      <div class="pull-top bg-black bb">
        <div class="white bg-black hh50 w100 center no-stuffing flex vertical-align bb-white">
          <div class="w25 left pl20 clickable active blue-hover"
              data-on-click="publish"
              data-publish="session:active"
              data-msg="{'primary':'community','secondary':'false'}">
              <img src="img/icon_2x_button_back.png" alt="Back" class="hh50 pt15 pb15" />
          </div>
          <div class="w50"><h1 class="no-stuffing capitalize truncate fs18 lh24">{{= parent.data.name }}</h1></div>
          <div class="w25 center f-large">&nbsp;</div>
        </div>
        <!-- END HEADER -->

            <div class="flex p20 pb10 pt10 w100 bg-white">
              <div class="flex3">
                <input
                    type="text"
                    placeholder="&#xf002; Search"
                    data-field="model.data.q.value"
                    value="{{= model.data.q.value }}"
                    data-on-input="model.update_q" />
              </div>
          
              <div class="{{= (model.hamburger == 'true') ? 'change-burger' : 'hamburger-container'}} clickable active" 
                  data-template="modal-hamburger-tmp">
              </div>

              <div class="flex-end-center"
                  tg-name="download_cloud_header">
                <div class="clickable active"
                    data-if="{{= grandparent.download_cloud }} == true"
                    data-on-click="grandparent.download_wc">
                  <i class="black blue-hover fs24 fas fa-cloud-download-alt"></i>
                </div>
                <div class="pointer-none" data-if="{{= grandparent.download_cloud }} == false">
                  <i class="pointer-none grey-lt fs24 fas fa-cloud-download-alt"></i>
                </div>
              </div>
            </div>
          </div>
            <!--End of Play and Shuffle-->
          <div class="body-header h100 pb160 scroll hide-scrollbar"
              data-on-scroll="grandparent.scroll_check"
              data-msg="{{= _self_.el_id }}"
              data-run="grandparent.fetch_playlist"
              data-run-msg="{{= parent.data.playlist_id }}"
              tg-name="community_playlist_page">
              
            <div class="mt100" data-if="{{= grandparent.fetching_playlist }} == true">
              <div class="p20 center i">Fetching tracks...</div>
              <div class="mb20 black" data-template="spinner-bounce-tmp"></div>
            </div>
        
            <div class="mt60" data-if="{{= grandparent.fetching_playlist}} == false">  
              <div class="w100" data-if="{{= _.size(parent.data.db_tracks) }} > 0">
                <div data-if="{{= parent.data.type}} == web_playlist">
                  <div class="w100"
                      data-if="{{= model.is_ready }} == true"
                      data-foreach="cluster"
                      data-cluster="{{= model.data.query }}"
                      data-cluster-comparator="model.data.comparator"
                      data-cluster-search-keys="model.data.q.search_keys"
                      data-cluster-search-value="model.data.q.value">
                    <div class="h100" data-template="sisyphus-community-playlist-list-item-tmp"></div>
                  </div>
                </div>
              </div>
            </div> 
            <div class="p20 mt100 center fs18 blue i"
                data-if="{{= _.size(parent.data.db_tracks) }} == 0">
                There are no new tracks to download.
            </div>
          </div>
        <div class="hh150">&nbsp;</div>
       </div>
      </div>
      <div class="hh150">&nbsp;</div>
    </div>
  </div>
</div>