<div class="h100" data-model="{{= session.community_id }}" data-run="model.reset_params">
  <div class="h100" data-model="{{= session.active.playlist_id }}">
    <div class="pull-top white bg-black hh50 w100 center no-stuffing flex vertical-align">
      <div class="w30 left pl20 f-large clickable"
          data-on-click="publish"
          data-publish="session:active"
          data-msg="{'secondary':'false'}"
      ><img src="img/icon_2x_button_back.png" alt="Back" class="hh50 pt15 pb15" /></div>
      <div class="w40">
        <h1 class="fs18 lh18 pb5 no-stuffing capitalize truncate">{{= model.data.name }}</h1>
      </div>
      <div class="w30 right pr20 f-large clickable active"
          data-on-click=""
          tg-name="playlist_edit_btn"
      ><img src="img/icon_2x_playlist_edit.png" alt="Edit" class="hh50 pt15 pb15" /></div>
    </div>
    <!--End of Header-->
    <div class="body-header h100" tg-name="playlist_page">
      <div class="bg-black hh50 w100 media_query_mt0 fixed2">
        <div class="center pt10">
          <div class="inline-block p5 pl10 pr15 white b-white rounded mr10 clickable blue-hover"
              data-on-click="model.play"
              data-msg="{{= 0 }}"
              tg-name="playlists_play_btn">
            <i class="fas fa-play pr5 pl5"></i>
            Play
          </div>
          <div class="inline-block p5 pl10 pr15 white b-white rounded ml10 clickable blue-hover"
              data-on-click="model.play_shuffled"
              tg-name="playlists_shuffle_btn">
            <i class="fas fa-random pr5 pl5"></i>
            Shuffle
          </div>
          <div class="inline-block" data-if="{{= app.is_app }} == true">
            <div class="inline-block blue-hover p5 pl10 pr10 white b-white rounded ml10 clickable"
                data-model="{{= model.playlist_id }}"
                data-on-click="model.present_siri"
                data-msg="{'action':'play_playlist','phrase':'Shuffle {{= parent.data.name }} Playlist','msg':{ 'id': '{{= parent.id }}', 'is_shuffle': 'true' },'identifier':'shuffle_{{= parent.id }}' }"
                data-if="{{= app.platform }} == iOS"><i class="fas fa-microphone"></i></div>
          </div>
        </div>
      </div>   
        <!--End of Play and Shuffle-->
  
        <div class="body-header h100 pb160 scroll hide-scrollbar"
            data-on-scroll="parent.scroll_check"
            data-msg="{{= _self_.el_id }}"
            data-run="parent.fetch_playlist"
            data-run-msg="{{= model.data.playlist_id }}"
            tg-name="community_playlist_page">

            <div class="mt100" data-if="{{= parent.fetching_playlist }} == true">
              <div class="p20 center i">Fetching tracks...</div>
              <div class="mb20 black" data-template="spinner-bounce-tmp"></div>
            </div>
        
        <div data-if="{{= parent.fetching_playlist}} == false">  
          <div class="w100" data-if="{{= _.size(parent.community_db_track_ids) }} > 0">
            <div class="w100 mt10"
                data-foreach="parent.community_db_track_ids"
                data-foreach-map="true"
                data-foreach-limit="{{= parent.limit }}"
                data-foreach-offset="{{= parent.offset }}">
              <div class="h100" data-template="sisyphus-community-playlist-list-item-tmp"></div>
            </div>
          </div>
        </div> 
    
          <div class="p20 mt100 center fs18 blue i"
              data-if="{{= _.size(model.data.db_tracks) }} == 0">
              There are no new tracks to download.
          </div>

          <div data-if="{{= _.size(parent.community_db_track_ids) }} > {{= parent.limit }}">
            <div class="p20 center i">Fetching tracks...</div>
            <div class="mb50 black" data-template="spinner-bounce-tmp"></div>
          </div>
        </div>
        <div class="hh150">&nbsp;</div>
      </div>
    </div>
    <div class="hh150">&nbsp;</div>
  </div>
</div>